var E=(m,h,o)=>new Promise((N,S)=>{var A=n=>{try{g(o.next(n))}catch(v){S(v)}},s=n=>{try{g(o.throw(n))}catch(v){S(v)}},g=n=>n.done?N(n.value):Promise.resolve(n.value).then(A,s);g((o=o.apply(m,h)).next())});import{u as de,B as d,j as e,l as oe,m as xe,A as ue,n as J,f as r,U as fe,F as pe,D as he,T as je,t as Ne,y as K,G as ye}from"./index-BJ2Ssq_J.js";import{m as be,c as ge,u as ve,b as l}from"./vendor-KAqkdx26.js";import{g as we,a as _e}from"./creditCommandeService-C9z-WlJi.js";import{f as B}from"./date-format-qL-o8H-f.js";import{W as Fe}from"./wave-orange-payment-service-BawrhR0p.js";import{M as Ce,a as Pe}from"./map-pin-D6_vW6t_.js";import{T as Q}from"./truck-CJVWri5p.js";function c(m,h=0){const o=Number(m);return Number.isFinite(o)?o:h}function De(){const{id:m}=be(),h=ge(),o=ve(),{user:N}=de(),[S,A]=l.useState(null),[s,g]=l.useState(null),[n,v]=l.useState(null),[y,Y]=l.useState(!0),[D,$]=l.useState(!1),[f,V]=l.useState(0),[O,w]=l.useState(""),[Z,k]=l.useState(!1),I=t=>{if(!t)return"En cours";switch(String(t).toLowerCase()){case"pending":return"En cours de validation";case"validated":return"Validé";case"rejected":return"Rejeté";default:return"En cours"}},U=t=>{if(!t)return e.jsx(Q,{className:"w-5 h-5 text-blue-500"});switch(String(t).toLowerCase()){case"pending":return e.jsx(K,{className:"w-5 h-5 text-yellow-500"});case"validated":return e.jsx(ye,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(K,{className:"w-5 h-5 text-red-500"});default:return e.jsx(Q,{className:"w-5 h-5 text-blue-500"})}},T=l.useCallback(()=>E(null,null,function*(){if(m)try{$(!0);const t=yield we(N&&N.id||null,m);if(console.log("data order",t),!t||!t.order)throw new Error("Réponse invalide");A(t.partner||null),g(t.order),v(t.employer||null)}catch(t){console.error(t),d.error("Impossible de charger les détails de la commande")}finally{Y(!1),$(!1)}}),[N&&N.id,m]);l.useEffect(()=>{T()},[T]);const _=l.useMemo(()=>Array.isArray(s&&s.payment_lines)?s.payment_lines:[],[s&&s.payment_lines]),b=l.useMemo(()=>_.length&&(_.find(t=>t.sequence===1)||_[0])||null,[_]),x=l.useMemo(()=>c(b&&b.amount||0,0),[b]),p=l.useMemo(()=>b?!b.state:!1,[b]),i=l.useMemo(()=>c(s&&s.amount_residual||0,0),[s&&s.amount_residual]),u=l.useMemo(()=>i<=0?0:Math.min(50,i),[i]),[H,W]=l.useState(!1),[F,ee]=l.useState(null),R=l.useMemo(()=>m?`/api/creditcommandes/proforma/${m}?create_if_missing=1`:null,[m]);l.useEffect(()=>{s&&E(null,null,function*(){if(m)try{W(!0);const a=yield _e(m);console.log(a),ee(a&&a.proforma||null)}catch(a){console.error(a),d.error("Impossible de charger la pro-forma.")}finally{W(!1)}})},[m,s]),l.useEffect(()=>{!y&&s&&(V(p?x:u),w(""))},[y,s,p,x,u]);const se=()=>{if(!p&&f<50){d.warning("Le montant doit être supérieur à 50 F CFA");return}k(!0)},te=t=>{t.preventDefault();const a=c(f,0);if(i<=0){d.info("Aucun montant restant à payer.");return}if(p){if(a<x){d.warning(`Le montant doit être au moins l'acompte requis (${r(x)}).`,{position:"top-center",autoClose:5e3});return}if(a>i){d.warning("Le montant à payer ne doit pas dépasser le montant restant à payer.",{position:"top-center",autoClose:5e3});return}}else{if(a<u){d.warning(`Le montant doit être ≥ ${r(u)}.`,{position:"top-center",autoClose:5e3});return}if(a>i){d.warning("Le montant à payer ne doit pas dépasser le montant restant à payer.",{position:"top-center",autoClose:5e3});return}}k(!0)},C=l.useCallback(()=>E(null,null,function*(){k(!1),yield T(),d.success("Paiement confirmé, page mise à jour.")}),[T]);l.useEffect(()=>{const t=a=>{if(a.key==="statusOrderPayment"){const j=(a.newValue||"").replace(/"/g,"");["succeeded","completed","paid","success"].includes(j)&&C()}};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[C]),l.useEffect(()=>{if(new URLSearchParams(h.search).get("payment")==="success"){const a=h.pathname;o(a,{replace:!0}),C()}},[h.search,h.pathname,o,C]);const q=String(s&&s.validation_rh_state||"").toLowerCase()==="validated"&&String(s&&s.validation_admin_state||"").toLowerCase()==="validated",M=i<=0,ae=y||!q||M||(p?c(f)<x||c(f)>i:c(f)<u||c(f)>i),le=l.useMemo(()=>c(s&&s.amount_untaxed||0,0),[s&&s.amount_untaxed]),re=l.useMemo(()=>c(s&&s.amount_tax||0,0),[s&&s.amount_tax]),P=l.useMemo(()=>c(s&&s.amount_total||0,0),[s&&s.amount_total]),z=l.useMemo(()=>P-i,[P,i]),ne=l.useMemo(()=>(s&&s.credit_type)==="banque",[s&&s.credit_type]),ie=(t,a="application/pdf")=>{try{const j=atob(t),G=j.length,X=new Uint8Array(G);for(let L=0;L<G;L++)X[L]=j.charCodeAt(L);const me=new Blob([X],{type:a});return URL.createObjectURL(me)}catch(j){return null}},ce=()=>{if(F&&F.pdf_base64){const t=ie(F.pdf_base64,"application/pdf");if(!t){d.error("Erreur lors de la préparation du fichier PDF.");return}const a=document.createElement("a");a.href=t,a.download=F&&F.pdf_filename||`PROFORMA-${s&&s.name||m}.pdf`,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(t);return}R?window.open(R,"_blank"):d.error("Lien de téléchargement indisponible.")};return e.jsxs(e.Fragment,{children:[e.jsx(oe,{title:"CCBM Shop | Détails Commande à Crédit",description:"Détails et paiement d'une commande à crédit sur CCBM Shop.",keywords:"ccbm, commande à crédit, échéancier, paiement mobile"}),e.jsx(xe,{childrenClasses:"pt-0 pb-0",children:e.jsxs("div",{className:"checkout-page-wrapper w-full bg-white pb-[60px]",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(ue,{title:"Détails Commande à Crédit",breadcrumb:[{name:"Accueil",path:"/"},{name:"Commande à Crédits",path:"/profile#commandes-a-credit"},{name:"Détails Commande à crédit"}]})}),y&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(J,{className:"mr-2 h-5 w-5 animate-spin"}),e.jsx("span",{children:"Chargement..."})]}),s&&e.jsx("div",{className:"checkout-main-content w-full",children:e.jsx("div",{className:"container-x mx-auto",children:e.jsxs("div",{className:"w-full sm:mb-10 mb-5",children:[e.jsxs("div",{className:"sm:flex sm:space-x-[18px]",children:[e.jsx("div",{className:"sm:w-1/3 w-full mb-5 h-[70px]",children:e.jsx("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex justify-center items-center",children:e.jsxs("span",{className:"text-[15px] font-medium",children:["N°Commande à Crédit ",e.jsx("span",{children:s.name})]})})}),e.jsx("div",{className:"sm:w-1/3 flex-1 h-[70px]",children:e.jsx("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex justify-center items-center",children:e.jsxs("span",{className:"text-[15px] font-medium",children:["Paiement :"," ",s.advance_payment_status==="not_paid"&&e.jsx("span",{className:"text-red-500",children:"Non Payé"}),s.advance_payment_status==="paid"&&e.jsx("span",{className:"text-green-500",children:" Payé "}),s.advance_payment_status==="partial"&&e.jsx("span",{className:"text-yellow-500",children:" Partiellement Payé"})]})})}),e.jsx("div",{className:"sm:w-1/3 flex-1 h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:" Statut : "}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:e.jsxs("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:[s.state==="sale"&&e.jsx("span",{className:"text-green-500",children:"Validé"}),s.state==="draft"&&e.jsx("span",{className:"text-yellow-500",children:"En cours de traitement"}),s.state==="cancel"&&e.jsx("span",{className:"text-yellow-500",children:"Annulée"}),s.state==="delivered"&&e.jsx("span",{className:"text-green-600",children:"Livrée"}),s.state==="to_delivered"&&e.jsx("span",{className:"text-yellow-500",children:"En cours de livraison"}),s.state==="validation"&&e.jsx("span",{className:"text-yellow-500",children:"En cours de validation"})]})})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-[18px] space-y-5 sm:space-y-0 mb-5",children:[e.jsx("div",{className:"w-full sm:w-1/2 h-auto sm:h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:"Validation entreprise"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:[e.jsx("span",{className:"hidden sm:inline-block",children:U(s.validation_rh_state)}),e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:I(s.validation_rh_state)})]})]})}),e.jsx("div",{className:"w-full sm:w-1/2 h-auto sm:h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:"Approbation CCBM"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:[e.jsx("span",{className:"hidden sm:inline-block",children:U(s.validation_admin_state)}),e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:I(s.validation_admin_state)})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-[18px] space-y-5 sm:space-y-0 mb-5",children:[e.jsx("div",{className:"w-full sm:w-1/2 h-auto sm:h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:" Date commande "}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:B(s.date_order)})})]})}),e.jsx("div",{className:"w-full sm:w-1/2 h-auto sm:h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:"Date de livraison"}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:B(s.commitment_date)})})]})})]}),s&&s.credit_type!=="banque"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"sm:flex sm:space-x-[18px]",children:[e.jsx("div",{className:"sm:w-1/3 w-full mb-5 h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:" Type crédit  "}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:s.credit_type=="direct"?"Direct":"Financé"})})]})}),e.jsx("div",{className:"sm:w-1/3 w-full mb-5 h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:" Total Payé  "}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:r(z)})})]})}),e.jsx("div",{className:"flex-1 h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:" Total Restant   "}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:r(i)})})]})})]})}),s&&s.credit_type==="banque"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"sm:flex sm:space-x-[18px]",children:[e.jsx("div",{className:"sm:w-1/2 w-full mb-5 h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:" Type crédit  "}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:s.credit_type=="direct"?"Direct":"Financé"})})]})}),e.jsx("div",{className:"sm:w-1/2 w-full mb-5 h-[70px]",children:e.jsxs("div",{className:"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0",children:[e.jsx("strong",{children:" Total à Payé  "}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2",children:e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-2 capitalize",children:r(z)})})]})})]})}),ne&&n&&e.jsxs("div",{className:"w-full mb-8 p-4 sm:p-6 border border-[#EDEDED] rounded-lg shadow-sm bg-white",children:[e.jsx("div",{className:"flex items-center mb-4 border-b pb-2",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Informations de l'employeur"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(fe,{className:"w-5 h-5 text-gray-500 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Nom de l'entreprise"}),e.jsx("div",{className:"text-gray-900",children:n.name||"Non spécifié"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ce,{className:"w-5 h-5 text-gray-500 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Adresse"}),e.jsxs("div",{className:"text-gray-900",children:[n.street||"Non spécifié",n.city?`, ${n.city}`:"",n.state_name?`, ${n.state_name}`:"",n.country_name?`, ${n.country_name}`:""]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 text-gray-500 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Téléphone"}),e.jsx("div",{className:"text-gray-900",children:n.phone||"Non spécifié"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pe,{className:"w-5 h-5 text-gray-500 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Email"}),e.jsx("div",{className:"text-gray-900",children:n.email||"Non spécifié"})]})]})]})]}),n.entreprise_code&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Informations supplémentaires"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Code entreprise"}),e.jsx("div",{className:"text-gray-900",children:n.entreprise_code})]})})]})]}),e.jsx("h1",{className:"text-2xl sm:text-3xl text-qblack font-medium mb-5 text-center",children:"Récapitulatif de la commande"}),e.jsx("div",{className:"w-full p-4 sm:p-6 border border-[#EDEDED] rounded-lg shadow-sm",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-4",children:[e.jsx("p",{className:"text-sm font-medium text-qblack uppercase",children:"Produit"}),e.jsx("p",{className:"text-sm font-medium text-qblack uppercase",children:"Total"})]}),e.jsx("div",{className:"space-y-4",children:Array.isArray(s.order_lines)&&s.order_lines.map(t=>{var a;return e.jsxs("div",{className:"border rounded-md p-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm sm:text-base text-qblack mb-1",children:[t.product_name,e.jsxs("sup",{className:"text-xs text-qgray ml-1",children:["x ",(a=t.product_uom_qty)!=null?a:0," ",t.product_uom_name||""]})]}),!!t.description&&e.jsx("p",{className:"text-xs sm:text-sm text-qgray",children:t.description})]}),e.jsx("span",{className:"text-sm sm:text-base text-qblack font-medium",children:r(t.price_total)})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-4 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between sm:block",children:[e.jsx("span",{className:"text-gray-500",children:"Prix unitaire"}),e.jsx("span",{className:"font-medium sm:block",children:r(t.price_unit)})]}),e.jsxs("div",{className:"flex justify-between sm:block",children:[e.jsx("span",{className:"text-gray-500",children:"Sous-total (HT)"}),e.jsx("span",{className:"font-medium sm:block",children:r(t.price_subtotal)})]}),e.jsxs("div",{className:"flex justify-between sm:block",children:[e.jsx("span",{className:"text-gray-500",children:"TVA"}),e.jsx("span",{className:"font-medium sm:block",children:t.price_tax==null?"—":r(t.price_tax)})]}),e.jsxs("div",{className:"flex justify-between sm:block",children:[e.jsx("span",{className:"text-gray-500",children:"Total (TTC)"}),e.jsx("span",{className:"font-semibold sm:block",children:r(t.price_total)})]})]})]},t.id)})}),s&&s.credit_type==="banque"&&s.validation_admin_state==="validated"&&e.jsx("div",{className:"w-full flex justify-center mb-4",children:e.jsx("button",{onClick:ce,className:"px-4 py-2 rounded bg-[#487a43] text-white disabled:opacity-60",disabled:H||!s,title:R||"",children:H?"Préparation du PDF...":"Télécharger la Pro-Forma"})}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Sous-total (hors TVA)"}),e.jsx("dd",{className:"text-sm text-gray-900 font-medium",children:r(le)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"TVA (18%)"}),e.jsx("dd",{className:"text-sm text-gray-900 font-medium",children:r(re)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Total TTC"}),e.jsx("dd",{className:"text-sm text-gray-900 font-medium",children:r(P)})]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("dt",{className:"text-sm text-gray-500",children:["Mode crédit : ",c(s.creditorder_month_count,0)," paiement(s)"]}),e.jsxs("dd",{className:"text-sm text-gray-900 font-medium",children:["Total: ",r(P)]})]}),_.map((t,a)=>{var j;return e.jsxs("dl",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("dt",{className:"text-sm text-gray-500",children:[t.label||`Paiement ${a+1}`,t.due_date&&e.jsxs("span",{className:"ml-2 text-xs text-gray-400",children:["(échéance: ",B(t.due_date),")"]})]}),e.jsxs("dd",{className:`text-sm sm:text-base font-medium ${t.state?"text-green-600":"text-gray-900"}`,children:[r(c(t.amount))," ",t.state?"✓":""]})]},(j=t.sequence)!=null?j:a)})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsxs("dl",{className:"flex items-center justify-between gap-2",children:[e.jsx("dt",{className:"text-base sm:text-lg font-bold text-gray-900",children:"Total à payer"}),e.jsx("dd",{className:"text-base sm:text-lg font-bold text-gray-900",children:r(P)})]}),e.jsxs("dl",{className:"flex items-center justify-between gap-2",children:[e.jsx("dt",{className:"text-base sm:text-lg font-bold text-gray-900",children:"Total Payé"}),e.jsx("dd",{className:"text-base sm:text-lg font-bold text-green-600",children:r(z)})]}),s&&s.credit_type!=="banque"&&e.jsx(e.Fragment,{children:e.jsxs("dl",{className:"flex items-center justify-between gap-2",children:[e.jsx("dt",{className:"text-base sm:text-lg font-bold text-gray-900",children:"Total Restant"}),e.jsx("dd",{className:"text-base sm:text-lg font-bold text-gray-900",children:r(i)})]})})]}),q&&!M?e.jsx("div",{className:"mt-6",children:s&&s.credit_type!=="banque"&&e.jsxs(e.Fragment,{children:[e.jsx(he,{htmlFor:"montant",children:"Montant à payer"}),e.jsx(je,{id:"montant",type:"number",value:f,disabled:!q||M,onChange:t=>{const a=Math.min(c(t.target.value,0),i);V(a),p?a<x?w(`Le montant doit être au moins l'acompte requis (${r(x)}).`):w(""):a<u?w(`Le montant doit être ≥ ${r(u)}.`):w("")},min:p?x:u,max:i,placeholder:p?`Acompte minimum: ${r(x)} (vous pouvez payer plus)`:`Minimum ${r(u)}`,className:"mt-1"}),O&&e.jsx("p",{className:"text-red-500 mt-1",children:O}),e.jsxs(Ne,{onClick:te,className:"mt-4 w-full !bg-[#487a43] !text-white hover:!bg-[#3f6d3b]  disabled:!bg-[#487a43]/50 disabled:!text-white/70 disabled:cursor-not-allowed",disabled:ae||D,children:[(y||D)&&e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),D?"Mise à jour...":`Passer à la caisse (${r(c(f))})`]}),p?e.jsxs("p",{className:"mt-2 text-xs text-gray-500 text-center",children:["Acompte requis :"," ",e.jsx("strong",{children:r(c(x))})," minimum. Vous pouvez payer ",e.jsx("em",{children:"au moins"})," l'acompte (et plus si vous voulez), sans dépasser le restant."]}):e.jsxs("p",{className:"mt-2 text-xs text-gray-500 text-center",children:["Paiement libre : choisissez le montant que vous souhaitez (minimum"," ",e.jsx("strong",{children:r(u)}),"), jusqu'à"," ",e.jsx("strong",{children:r(i)})," restant."]})]})}):e.jsxs(e.Fragment,{children:[!q&&e.jsx("p",{className:"text-yellow-500 mt-4 text-center text-base sm:text-xl",children:"Merci d'attendre la validation de la commande à crédit par la RH et CCBM"}),M&&e.jsx("p",{className:"text-green-600 mt-4 text-center text-base sm:text-xl",children:"Votre paiement est déjà réglé"})]})]})}),Z&&s&&e.jsx(Fe,{handlePay:se,totalAmount:c(f),onClose:()=>k(!1),order:s,idOrder:s.id,onSuccess:C})]})})}),!y&&!s&&e.jsx("div",{className:"flex justify-center items-center py-10",children:"Commande à Crédit non trouvée"})]})})]})}export{De as default};
